$(function(){var g=f("room"),c;if(g==false){if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){a=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(a)}}else{localStorage.setItem("room170103",g);return g}function f(b){var k=window.location.search.substring(1);var l=k.split("&");for(var j=0;j<l.length;j++){var m=l[j].split("=");if(m[0]==b){return m[1]}}return(false)}$("button.sectionNavigation").click(function(b){b.preventDefault();u=$(this).attr("href");c=$("#room").val();if(u=="#firstScreen"){document.location.href="/"}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#readerScreenInfo"){$(".readerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#readerScreenInfoClose"){$(".readerScreenInfo").hide();$("html").removeClass("no-scroll")}else{console.log(u+": There was a button that won't work, Report to the developer");alert(u+": Report to developer")}}}}});var e=0;$(document).keydown(function(b){if(!$("#readerScreen").hasClass("hidden")){b.preventDefault();switch(b.which){case 13:d.emit("controlls",{room:h,msg:"alert",msgextra:null});break}}if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-One")){b.preventDefault();switch(b.which){case 65:case 81:case 70:case 37:case 38:if(e!="0"){e--}d.emit("controlls",{room:h,msg:"position",msgextra:e});break;case 69:case 68:case 74:case 39:case 40:case 32:if(e!=($(".messagesRead div").length-1)){e++}d.emit("controlls",{room:h,msg:"position",msgextra:e});break;default:return}}else{if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-Two")){b.preventDefault();switch(b.which){case 65:case 81:case 70:case 37:case 38:if(e!="0"){e--}d.emit("controlls",{room:h,msg:"position",msgextra:e});break;case 69:case 68:case 74:case 39:case 40:if(e!=($(".messagesRead div").length-1)){e++}d.emit("controlls",{room:h,msg:"position",msgextra:e});break;case 32:readerScrollTop=$(window).scrollTop();d.emit("controlls",{room:h,msg:"positionscrollauto",msgextra:readerScrollTop});default:return}}}});var d=io.connect();var d=io();var h;if(localStorage.getItem("room170103")!==null&&localStorage.getItem("room170103")!=""){h=localStorage.getItem("room170103")}else{document.location.href="/"}d.on("connect",function(){console.log("writer: "+h);d.emit("room",h)});d.on("chat message",function(b){console.log(b);$(".messagesRead").append("<div><p>"+b+"</p></div>")});d.on("controlls",function(i,b){if(i=="alert"){$(".alert-text").text("There is a problem reported");$(".alert").show()}else{if(i=="position"){$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*b},"fast")}else{if(i=="positionscrollauto"){var j=b;if(readerTimerScroll==true){readerTimerScroll=false;readerScrollAutoDown=setInterval(function(){j+=scrollSpeed;if($(window).scrollTop()+$(window).height()>$(document).height()-500){clearInterval(readerScrollAutoDown);$(".alert-text").text("End of cue");$(".alert").show()}$("body").animate({scrollTop:j},700,"linear")},300)}else{if(readerTimerScroll==false){readerTimerScroll=true;clearInterval(readerScrollAutoDown)}}}else{console.log(b+": Unknown error in width controlls, report to developer")}}}});$("#createRoom, #arrow-right").click(function(i){i.preventDefault();var b=$("#room").val();d.emit("room",b);$("#defaultRoomName").val(b);$(".alert-text").text("Room has been created");$(".alert").show()})});function launchFullscreen(b){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){$(".fullscreen").addClass("compress").removeClass("expand");if(b.requestFullscreen){b.requestFullscreen()}else{if(b.mozRequestFullScreen){b.mozRequestFullScreen()}else{if(b.webkitRequestFullscreen){b.webkitRequestFullscreen()}else{if(b.msRequestFullscreen){b.msRequestFullscreen()}}}}}else{$(".fullscreen").addClass("expand").removeClass("compress");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(b.msCancelFullscreen){b.msCancelFullscreen()}}}}}};
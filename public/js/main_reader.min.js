$(function(){var f=e("room");if(f==false){if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){a=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(a)}}else{localStorage.setItem("room170103",f);return f}function e(h){var k=window.location.search.substring(1);var l=k.split("&");for(var j=0;j<l.length;j++){var m=l[j].split("=");if(m[0]==h){return m[1]}}return(false)}$("button.sectionNavigation").click(function(h){h.preventDefault();u=$(this).attr("href");b=$("#room").val();if(u=="#firstScreen"){document.location.href="/"}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#readerScreenInfo"){$(".readerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#readerScreenInfoClose"){$(".readerScreenInfo").hide();$("html").removeClass("no-scroll")}else{console.log(u+": There was a button that won't work, Report to the developer");alert(u+": Report to developer")}}}}});var d=0;$(document).keydown(function(h){if(!$("#readerScreen").hasClass("hidden")){h.preventDefault();switch(h.which){case 13:c.emit("controlls",{room:g,msg:"alert",msgextra:null});break}}if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-One")){h.preventDefault();switch(h.which){case 65:case 81:case 70:case 37:case 38:if(d!="0"){d--}c.emit("controlls",{room:g,msg:"position",msgextra:d});break;case 69:case 68:case 74:case 39:case 40:case 32:if(d!=($(".messagesRead div").length-1)){d++}c.emit("controlls",{room:g,msg:"position",msgextra:d});break;default:return}}else{if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-Two")){h.preventDefault();switch(h.which){case 65:case 81:case 70:case 37:case 38:if(d!="0"){d--}c.emit("controlls",{room:g,msg:"position",msgextra:d});break;case 69:case 68:case 74:case 39:case 40:if(d!=($(".messagesRead div").length-1)){d++}c.emit("controlls",{room:g,msg:"position",msgextra:d});break;case 32:readerScrollTop=$(window).scrollTop();c.emit("controlls",{room:g,msg:"positionscrollauto",msgextra:readerScrollTop});default:return}}}});var c=io.connect();var c=io();var g;if(localStorage.getItem("room170103")!==null&&localStorage.getItem("room170103")!=""){g=localStorage.getItem("room170103")}else{document.location.href="/"}c.on("connect",function(){console.log("writer: "+g);c.emit("room",g)});c.on("chat message",function(h){console.log(h);$(".messagesRead").append("<div><p>"+h+"</p></div>")});c.on("controlls",function(i,h){if(i=="alert"){$(".alert-text").text("There is a problem reported");$(".alert").show()}else{if(i=="position"){$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*h},"fast")}else{if(i=="positionscrollauto"){var j=h;if(readerTimerScroll==true){readerTimerScroll=false;readerScrollAutoDown=setInterval(function(){j+=scrollSpeed;if($(window).scrollTop()+$(window).height()>$(document).height()-500){clearInterval(readerScrollAutoDown);$(".alert-text").text("End of cue");$(".alert").show()}$("body").animate({scrollTop:j},700,"linear")},300)}else{if(readerTimerScroll==false){readerTimerScroll=true;clearInterval(readerScrollAutoDown)}}}else{console.log(h+": Unknown error in width controlls, report to developer")}}}});$("#createRoom, #arrow-right").click(function(i){i.preventDefault();var h=$("#room").val();c.emit("room",h);$("#defaultRoomName").val(h);$(".alert-text").text("Room has been created");$(".alert").show()})});function launchFullscreen(c){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){$(".fullscreen").addClass("compress").removeClass("expand");if(c.requestFullscreen){c.requestFullscreen()}else{if(c.mozRequestFullScreen){c.mozRequestFullScreen()}else{if(c.webkitRequestFullscreen){c.webkitRequestFullscreen()}else{if(c.msRequestFullscreen){c.msRequestFullscreen()}}}}}else{$(".fullscreen").addClass("expand").removeClass("compress");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(c.msCancelFullscreen){c.msCancelFullscreen()}}}}}};
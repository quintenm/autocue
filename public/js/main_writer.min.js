$(function(){var h=e("room");if(h==false){if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){a=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(a)}}else{localStorage.setItem("room170103",h);return h}function e(j){var l=window.location.search.substring(1);var m=l.split("&");for(var k=0;k<m.length;k++){var n=m[k].split("=");if(n[0]==j){return n[1]}}return(false)}$("button.sectionNavigation").click(function(m){m.preventDefault();u=$(this).attr("href");b=$("#room").val();if(u=="#firstScreen"){document.location.href="/"}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#uploadpage"){$(".uploadpage").show()}else{if(u=="#uploadClose"){$(".uploadpage").hide()}else{if(u=="#writerScreenInfo"){$(".writerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#writerScreenInfoClose"){$(".writerScreenInfo").hide();$("html").removeClass("no-scroll")}else{if(u=="#uploadButton"){if(!window.FileReader){alert("Your browser is not supported")}var k=$("#file").get(0);var j=new FileReader();if(k.files.length){var l=k.files[0];j.readAsText(l);$(j).on("load",f);$(".uploadpage").hide()}else{alert("Please upload a file before continuing")}}else{if(u=="#downloadButton"){d("DigitalAutocue",g())}else{console.log(u+": There was a button that won't work, Report to the developer");alert(u+": Report to developer")}}}}}}}}});function d(j,m){var l=new Date();j=j+"_"+l.toLocaleDateString()+"_"+l.getHours()+"-"+l.getMinutes()+"-"+l.getSeconds()+".txt";var k=document.createElement("a");k.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(m));k.setAttribute("download",j);k.style.display="none";document.body.appendChild(k);k.click();document.body.removeChild(k)}function g(){var m="",k;k=document.getElementById("messageWriter").getElementsByTagName("p");for(var l=2,j=k.length;l<j;l++){m+=k[l].innerHTML+"\n"}return m}function f(l){var k=l.target.result,j;if(k&&k.length){j=k.split("\n");for(index=0,len=j.length;index<len;++index){c.emit("chat message",{room:i,msg:j[index]})}}}var c=io.connect();var c=io();var i;if(localStorage.getItem("room170103")!==null&&localStorage.getItem("room170103")!=""){i=localStorage.getItem("room170103")}else{document.location.href="/"}c.on("connect",function(){console.log("writer: "+i);c.emit("room",i)});$("#inputForm").submit(function(){c.emit("chat message",{room:i,msg:$("#m").val()});$("#m").val("");return false});c.on("chat message",function(j){console.log(j);$(".messagesWrite").append('<div><p contenteditable="false">'+j+"</p></div>");$("#m").focus()});c.on("controlls",function(k,j){if(k=="alert"){$(".alert-text").text("There is a problem reported");$(".alert").show()}else{console.log(j+": Unknown error in width controlls, report to developer")}})});function launchFullscreen(c){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){$(".fullscreen").addClass("compress").removeClass("expand");if(c.requestFullscreen){c.requestFullscreen()}else{if(c.mozRequestFullScreen){c.mozRequestFullScreen()}else{if(c.webkitRequestFullscreen){c.webkitRequestFullscreen()}else{if(c.msRequestFullscreen){c.msRequestFullscreen()}}}}}else{$(".fullscreen").addClass("expand").removeClass("compress");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(c.msCancelFullscreen){c.msCancelFullscreen()}}}}}};
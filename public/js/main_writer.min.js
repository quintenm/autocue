$(function(){var i=f("room"),c;if(i==false){if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){a=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(a)}}else{localStorage.setItem("room170103",i);return i}function f(b){var l=window.location.search.substring(1);var m=l.split("&");for(var k=0;k<m.length;k++){var n=m[k].split("=");if(n[0]==b){return n[1]}}return(false)}$("button.sectionNavigation").click(function(m){m.preventDefault();u=$(this).attr("href");c=$("#room").val();if(u=="#firstScreen"){document.location.href="/"}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#uploadpage"){$(".uploadpage").show()}else{if(u=="#uploadClose"){$(".uploadpage").hide()}else{if(u=="#writerScreenInfo"){$(".writerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#writerScreenInfoClose"){$(".writerScreenInfo").hide();$("html").removeClass("no-scroll")}else{if(u=="#uploadButton"){if(!window.FileReader){alert("Your browser is not supported")}var k=$("#file").get(0);var b=new FileReader();if(k.files.length){var l=k.files[0];b.readAsText(l);$(b).on("load",g);$(".uploadpage").hide()}else{alert("Please upload a file before continuing")}}else{if(u=="#downloadButton"){e("DigitalAutocue",h())}else{console.log(u+": There was a button that won't work, Report to the developer");alert(u+": Report to developer")}}}}}}}}});function e(b,m){var l=new Date();b=b+"_"+l.toLocaleDateString()+"_"+l.getHours()+"-"+l.getMinutes()+"-"+l.getSeconds()+".txt";var k=document.createElement("a");k.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(m));k.setAttribute("download",b);k.style.display="none";document.body.appendChild(k);k.click();document.body.removeChild(k)}function h(){var m="",k;k=document.getElementById("messageWriter").getElementsByTagName("p");for(var l=2,b=k.length;l<b;l++){m+=k[l].innerHTML+"\n"}return m}function g(l){var k=l.target.result,b;if(k&&k.length){b=k.split("\n");for(index=0,len=b.length;index<len;++index){d.emit("chat message",{room:j,msg:b[index]})}}}var d=io.connect();var d=io();var j;if(localStorage.getItem("room170103")!==null&&localStorage.getItem("room170103")!=""){j=localStorage.getItem("room170103")}else{document.location.href="/"}d.on("connect",function(){console.log("writer: "+j);d.emit("room",j)});$("#inputForm").submit(function(){d.emit("chat message",{room:j,msg:$("#m").val()});$("#m").val("");return false});d.on("chat message",function(b){console.log(b);$(".messagesWrite").append('<div><p contenteditable="false">'+b+"</p></div>");$("#m").focus()});d.on("controlls",function(k,b){if(k=="alert"){$(".alert-text").text("There is a problem reported");$(".alert").show()}else{console.log(b+": Unknown error in width controlls, report to developer")}})});function launchFullscreen(b){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){$(".fullscreen").addClass("compress").removeClass("expand");if(b.requestFullscreen){b.requestFullscreen()}else{if(b.mozRequestFullScreen){b.mozRequestFullScreen()}else{if(b.webkitRequestFullscreen){b.webkitRequestFullscreen()}else{if(b.msRequestFullscreen){b.msRequestFullscreen()}}}}}else{$(".fullscreen").addClass("expand").removeClass("compress");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(b.msCancelFullscreen){b.msCancelFullscreen()}}}}}};
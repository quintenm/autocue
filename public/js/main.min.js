$(function(){var n=["ant","bird"," cat","chicken","cow","dog","elephant","fish","fox","horse","kangaroo","lion","monkey","penguin","pig","rabbit","sheep","tiger","whale","wolf","zebra"],o,m,e=true,l=0,j=100,h=0,q="";function g(){if(localStorage.getItem("token170103")!==null&&localStorage.getItem("token170103")!=""){m=localStorage.getItem("token170103");return m}else{if(q==""){var a=n[Math.floor(Math.random()*n.length)].toLowerCase();var b=Math.floor(Math.random()*1000)+1;return a+""+b}else{return q}}}$("#room").val(g);if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){o=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(o)}$("button.sectionNavigation").click(function(s){s.preventDefault();u=$(this).attr("href");m=$("#room").val();if(u=="#readerScreen"||u=="#writerScreen"||u=="#firstScreen"){$("#firstScreen,#readerScreen,#writerScreen").addClass("hidden");$(u).removeClass("hidden")}if(u=="#readerScreen"){$("#varCss").attr("href","css/reader.min.css")}else{if(u=="#writerScreen"){$("#varCss").attr("href","css/writer.min.css")}else{if(u=="#firstScreen"){$("#varCss").attr("href","css/main.min.css")}else{if(u=="#save"){o=$("body").attr("class");localStorage.setItem("design170103",o);localStorage.setItem("token170103",m)}else{if(u=="#reset"){$("body").removeAttr("class").addClass("font-color-primary background-color-primary font-family-secundary readerStyle-One text-weight-regular text-transform-normal");o=$("body").attr("class");localStorage.setItem("design170103",o);localStorage.setItem("token170103","")}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#uploadpage"){$(".uploadpage").show()}else{if(u=="#uploadClose"){$(".uploadpage").hide()}else{if(u=="#mainScreenOptions"){$(".mainScreenOptions").show();$("html").addClass("no-scroll")}else{if(u=="#mainScreenOptionsClose"){$(".mainScreenOptions").hide();$("html").removeClass("no-scroll")}else{if(u=="#mainScreenHelp"){$(".mainScreenHelp").show();$("html").addClass("no-scroll")}else{if(u=="#mainScreenHelpClose"){$(".mainScreenHelp").hide();$("html").removeClass("no-scroll")}else{if(u=="#readerScreenInfo"){$(".readerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#readerScreenInfoClose"){$(".readerScreenInfo").hide();$("html").removeClass("no-scroll")}else{if(u=="#writerScreenInfo"){$(".writerScreenInfo").show();$("html").addClass("no-scroll")}else{if(u=="#writerScreenInfoClose"){$(".writerScreenInfo").hide();$("html").removeClass("no-scroll")}else{if(u=="#uploadButton"){if(!window.FileReader){alert("Your browser is not supported")}var b=$("#file").get(0);var a=new FileReader();if(b.files.length){var r=b.files[0];a.readAsText(r);$(a).on("load",i);$(".uploadpage").hide()}else{alert("Please upload a file before continuing")}}else{if(u=="#downloadButton"){d("DigitalAutocue",f())}else{console.log(u+": There was a button that won't work, Report to the developer");alert(u+": Report to developer")}}}}}}}}}}}}}}}}}}});function d(a,s){var r=new Date();a=a+"_"+r.toLocaleDateString()+"_"+r.getHours()+"-"+r.getMinutes()+"-"+r.getSeconds()+".txt";var b=document.createElement("a");b.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(s));b.setAttribute("download",a);b.style.display="none";document.body.appendChild(b);b.click();document.body.removeChild(b)}function f(){var s="",b;b=document.getElementById("messageWriter").getElementsByTagName("p");for(var r=2,a=b.length;r<a;r++){s+=b[r].innerHTML+"\n"}return s}function i(r){var b=r.target.result,a;if(b&&b.length){a=b.split("\n");for(index=0,len=a.length;index<len;++index){p.emit("chat message",{room:c,msg:a[index]})}}}$(".navigation").click(function(a){if($(this).hasClass("previous")){$(".part2,.navigation.previous").addClass("hidden");$(".part1,.navigation.next").removeClass("hidden")}else{if($(this).hasClass("next")){$(".part1,.navigation.next").addClass("hidden");$(".part2,.navigation.previous").removeClass("hidden")}}});$(".dropdown-content a").click(function(r){r.preventDefault();var b=$(this).data("href");if(b.match("^font-color-*")){$("body[class*='font-color-']").removeClass(function(a,s){return(s.match(/(^|\s)font-color-\S+/g)||[]).join(" ")})}else{if(b.match("^background-color-*")){$("body[class*='background-color-']").removeClass(function(a,s){return(s.match(/(^|\s)background-color-\S+/g)||[]).join(" ")})}else{if(b.match("^font-family-*")){$("body[class*='font-family-']").removeClass(function(a,s){return(s.match(/(^|\s)font-family-\S+/g)||[]).join(" ")})}else{if(b.match("^readerStyle-*")){$("body[class*='readerStyle-']").removeClass(function(a,s){return(s.match(/(^|\s)readerStyle-\S+/g)||[]).join(" ")})}else{if(b.match("^text-weight-*")){$("body[class*='text-weight-']").removeClass(function(a,s){return(s.match(/(^|\s)text-weight-\S+/g)||[]).join(" ")})}else{if(b.match("^text-transform-*")){$("body[class*='text-transform-']").removeClass(function(a,s){return(s.match(/(^|\s)text-transform-\S+/g)||[]).join(" ")})}}}}}}$("body").addClass(b)});var k=0;$(document).keydown(function(a){if(!$("#readerScreen").hasClass("hidden")){a.preventDefault();switch(a.which){case 13:p.emit("controlls",{room:c,msg:"alert",msgextra:null});break}}if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-One")){a.preventDefault();switch(a.which){case 65:case 81:case 70:case 37:case 38:if(k!="0"){k--}p.emit("controlls",{room:c,msg:"position",msgextra:k});break;case 69:case 68:case 74:case 39:case 40:case 32:if(k!=($(".messagesRead div").length-1)){k++}p.emit("controlls",{room:c,msg:"position",msgextra:k});break;default:return}}else{if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-Two")){a.preventDefault();switch(a.which){case 65:case 81:case 70:case 37:case 38:if(k!="0"){k--}p.emit("controlls",{room:c,msg:"position",msgextra:k});break;case 69:case 68:case 74:case 39:case 40:if(k!=($(".messagesRead div").length-1)){k++}p.emit("controlls",{room:c,msg:"position",msgextra:k});break;case 32:l=$(window).scrollTop();p.emit("controlls",{room:c,msg:"positionscrollauto",msgextra:l});default:return}}}});var p=io.connect();var p=io();var c=$("#room").val();p.on("connect",function(){p.emit("room",c)});$("#inputForm").submit(function(){p.emit("chat message",{room:c,msg:$("#m").val()});$("#m").val("");return false});p.on("chat message",function(a){console.log(a);$(".messagesWrite").append('<div><p contenteditable="false">'+a+"</p></div>");$(".messagesRead").append("<div><p>"+a+"</p></div>");$("#m").focus()});p.on("controlls",function(b,a){if(b=="alert"){$(".alert-text").text("There is a problem reported");$(".alert").show()}else{if(b=="position"){$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*a},"fast")}else{if(b=="positionscrollauto"){var r=a;if(e==true){e=false;h=setInterval(function(){r+=j;if($(window).scrollTop()+$(window).height()>$(document).height()-500){clearInterval(h);$(".alert-text").text("End of cue");$(".alert").show()}$("body").animate({scrollTop:r},700,"linear")},300)}else{if(e==false){e=true;clearInterval(h)}}}else{console.log(a+": Unknown error in width controlls, report to developer")}}}});$("#createRoom, #arrow-right").click(function(b){b.preventDefault();var a=$("#room").val();p.emit("room",a);$(".alert-text").text("Room has been created");$(".alert").show()})});function launchFullscreen(a){if((document.fullScreenElement&&document.fullScreenElement!==null)||(!document.mozFullScreen&&!document.webkitIsFullScreen)){$(".fullscreen").addClass("compress").removeClass("expand");if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen()}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}}}}}else{$(".fullscreen").addClass("expand").removeClass("compress");if(document.cancelFullScreen){document.cancelFullScreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(a.msCancelFullscreen){a.msCancelFullscreen()}}}}}};
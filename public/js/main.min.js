$(function(){var l=["ant","bird"," cat","chicken","cow","dog","elephant","fish","fox","horse","kangaroo","lion","monkey","penguin","pig","rabbit","sheep","tiger","whale","wolf","zebra"],m,k,d=true,j=0,h=100,f=0;function e(){if(localStorage.getItem("token170103")!=false&&localStorage.getItem("token170103")===undefined){k=localStorage.getItem("token170103");return k}else{var a=l[Math.floor(Math.random()*l.length)].toLowerCase();var b=Math.floor(Math.random()*1000)+1;return a+""+b}}$("#room").val(e);if(localStorage.getItem("design170103")!==null||localStorage.getItem("design170103")!=null){m=localStorage.getItem("design170103");$("body").removeAttr("class").addClass(m)}$("button.sectionNavigation").click(function(p){p.preventDefault();u=$(this).attr("href");k=$("#room").val();if(u=="#readerScreen"||u=="#writerScreen"||u=="#firstScreen"){$("#firstScreen,#readerScreen,#writerScreen").addClass("hidden");$(u).removeClass("hidden")}if(u=="#readerScreen"){$("#varCss").attr("href","css/reader.min.css")}else{if(u=="#writerScreen"){$("#varCss").attr("href","css/writer.min.css")}else{if(u=="#firstScreen"){$("#varCss").attr("href","css/main.min.css")}else{if(u=="#save"){m=$("body").attr("class");localStorage.setItem("design170103",m);localStorage.setItem("token170103",k)}else{if(u=="#reset"){$("body").removeAttr("class").addClass("font-color-primary background-color-primary font-family-secundary readerStyle-One");m=$("body").attr("class");localStorage.setItem("design170103",m);localStorage.setItem("token170103","")}else{if(u=="#alertClose"){$(".alert").hide()}else{if(u=="#uploadpage"){$(".uploadpage").show()}else{if(u=="#uploadClose"){$(".uploadpage").hide()}else{if(u=="#readerScreenInfo"){$(".readerScreenInfo").show()}else{if(u=="#readerScreenInfoClose"){$(".readerScreenInfo").hide()}else{if(u=="#writerScreenInfo"){$(".writerScreenInfo").show()}else{if(u=="#writerScreenInfoClose"){$(".writerScreenInfo").hide()}else{if(u=="#uploadButton"){if(!window.FileReader){alert("Your browser is not supported")}var b=$("#file").get(0);var a=new FileReader();if(b.files.length){var o=b.files[0];a.readAsText(o);$(a).on("load",g);$(".uploadpage").hide()}else{alert("Please upload a file before continuing")}}else{console.log(u+": Report to developer");alert(u+": Report to developer")}}}}}}}}}}}}}});function g(o){var b=o.target.result,a;if(b&&b.length){a=b.split("\n");for(index=0,len=a.length;index<len;++index){n.emit("chat message",{room:c,msg:a[index]})}}}$(".navigation").click(function(a){if($(this).hasClass("previous")){$(".part2,.navigation.previous").addClass("hidden");$(".part1,.navigation.next").removeClass("hidden")}else{if($(this).hasClass("next")){$(".part1,.navigation.next").addClass("hidden");$(".part2,.navigation.previous").removeClass("hidden")}}});$("#options-button").click(function(a){a.preventDefault();$("#help-list").hide();$("#options-list").slideToggle()});$("#help-button").click(function(a){a.preventDefault();$("#options-list").hide();$("#help-list").slideToggle()});$(".dropdown-content a").click(function(o){o.preventDefault();var b=$(this).data("href");if(b.match("^font-color-*")){$("body[class*='font-color-']").removeClass(function(a,p){return(p.match(/(^|\s)font-color-\S+/g)||[]).join(" ")})}else{if(b.match("^background-color-*")){$("body[class*='background-color-']").removeClass(function(a,p){return(p.match(/(^|\s)background-color-\S+/g)||[]).join(" ")})}else{if(b.match("^font-family-*")){$("body[class*='font-family-']").removeClass(function(a,p){return(p.match(/(^|\s)font-family-\S+/g)||[]).join(" ")})}else{if(b.match("^readerStyle-*")){$("body[class*='readerStyle-']").removeClass(function(a,p){return(p.match(/(^|\s)readerStyle-\S+/g)||[]).join(" ")})}}}}$("body").addClass(b)});$("#createRoom").click(function(){});var i=0;$(document).keydown(function(a){if(!$("#readerScreen").hasClass("hidden")){a.preventDefault();switch(a.which){case 13:$(".alert-text").text("There is a problem reported");$(".alert").show();break}}if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-One")){a.preventDefault();switch(a.which){case 65:case 81:case 70:case 37:case 38:if(i!="0"){i--}$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*i},"fast");break;case 69:case 68:case 74:case 39:case 40:case 32:if(i!=($(".messagesRead div").length-1)){i++}$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*i},"fast");break;default:return}}else{if(!$("#readerScreen").hasClass("hidden")&&$("body").hasClass("readerStyle-Two")){a.preventDefault();switch(a.which){case 65:case 81:case 70:case 37:case 38:if(i!="0"){i--}$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*i},"fast");break;case 69:case 68:case 74:case 39:case 40:if(i!=($(".messagesRead div").length-1)){i++}$("body").animate({scrollTop:($(".messagesRead").height()/$(".messagesRead div").length)*i},"fast");break;case 32:j=$(window).scrollTop();if(d==true){d=false;f=setInterval(function(){j+=h;if($(window).scrollTop()+$(window).height()>$(document).height()-500){clearInterval(f);$(".alert-text").text("End of cue");$(".alert").show()}$("body").animate({scrollTop:j},300,"linear")},300)}else{if(d==false){d=true;clearInterval(f)}}default:return}}}});var n=io.connect();var n=io();var c=$("#room").val();n.on("connect",function(){n.emit("room",c)});$("#inputForm").submit(function(){n.emit("chat message",{room:c,msg:$("#m").val()});$("#m").val("");return false});n.on("chat message",function(a){$(".messagesWrite").append('<div><p contenteditable="true">'+a+"</p></div>");$(".messagesRead").append("<div><p>"+a+"</p></div>");$("#m").focus()});$("#createRoom").click(function(b){b.preventDefault();var a=$("#room").val();n.emit("room",a);$(".alert-text").text("Room has been created");$(".alert").show()})});